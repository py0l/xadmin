"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[301],{47046:function(Ze,R){var n={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};R.Z=n},51042:function(Ze,R,n){var w=n(1413),E=n(67294),z=n(42110),l=n(91146),ue=function(m,D){return E.createElement(l.Z,(0,w.Z)((0,w.Z)({},m),{},{ref:D,icon:z.Z}))},V=E.forwardRef(ue);R.Z=V},17198:function(Ze,R,n){var w=n(15009),E=n.n(w),z=n(97857),l=n.n(z),ue=n(99289),V=n.n(ue),ce=n(5574),m=n.n(ce),D=n(47019),me=n(85576),t=n(55102),Ce=n(34041),L=n(67294),v=n(85893),j=(0,L.forwardRef)(function(N,k){var G=N.onOk,U=(0,L.useState)(!1),H=m()(U,2),re=H[0],_=H[1],p=(0,L.useState)(null),s=m()(p,2),B=s[0],e=s[1],se=D.Z.useForm(),le=m()(se,1),K=le[0],ve=(0,L.useState)("add"),X=m()(ve,2),Y=X[0],Q=X[1],fe=(0,L.useState)(!0),oe=m()(fe,2),Fe=oe[0],he=oe[1];(0,L.useImperativeHandle)(k,function(){return{show:function(I,f){he(!0),Q(I),I==="edit"&&f?(e(f),K.setFieldsValue(f),console.log("show editingItem",f),f.subTabs&&f.subTabs.length>0&&he(!1)):(e(null),K.resetFields()),_(!0)}}});var J=function(){var W=V()(E()().mark(function I(){var f;return E()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.prev=0,C.next=3,K.validateFields();case 3:f=C.sent,G(l()(l()({},f),{},{id:(B==null?void 0:B.id)||Date.now().toString()}),Y),_(!1),e(null),K.resetFields(),C.next=13;break;case 10:C.prev=10,C.t0=C.catch(0),console.error("Form validation failed:",C.t0);case 13:case"end":return C.stop()}},I,null,[[0,10]])}));return function(){return W.apply(this,arguments)}}(),Ee=function(){_(!1),e(null),K.resetFields()};return(0,v.jsx)(me.Z,{title:B?"\u7F16\u8F91\u6309\u94AE":"\u6DFB\u52A0\u6309\u94AE",open:re,onOk:J,onCancel:Ee,width:600,children:(0,v.jsxs)(D.Z,{form:K,layout:"vertical",children:[(0,v.jsx)(D.Z.Item,{name:"name",label:"\u6309\u94AE\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6309\u94AE\u540D\u79F0"}],children:(0,v.jsx)(t.Z,{placeholder:"\u8BF7\u8F93\u5165\u6309\u94AE\u540D\u79F0"})}),Fe&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(D.Z.Item,{name:"type",label:"\u6309\u94AE\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B"}],children:(0,v.jsx)(Ce.Z,{placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"page",label:"\u8DF3\u8F6C\u9875\u9762"},{value:"phone",label:"\u62E8\u6253\u7535\u8BDD"},{value:"send",label:"\u5B9A\u5411\u53D1\u9001"}]})}),(0,v.jsx)(D.Z.Item,{noStyle:!0,shouldUpdate:function(I,f){return I.type!==f.type},children:function(I){var f=I.getFieldValue,Z=f("type");return Z==="page"?(0,v.jsx)(D.Z.Item,{name:"url",label:"\u8DF3\u8F6C\u94FE\u63A5",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u94FE\u63A5"}],children:(0,v.jsx)(t.Z,{placeholder:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u94FE\u63A5"})}):Z==="phone"?(0,v.jsx)(D.Z.Item,{name:"phone",label:"\u7535\u8BDD\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"}],children:(0,v.jsx)(t.Z,{placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"})}):Z==="send"?(0,v.jsx)(D.Z.Item,{name:"content",label:"\u53D1\u9001\u5185\u5BB9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u9001\u5185\u5BB9"}],children:(0,v.jsx)(t.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u53D1\u9001\u5185\u5BB9",rows:4})}):null}})]})]})})});R.Z=j},44685:function(Ze,R,n){n.d(R,{Z:function(){return L}});var w=n(5574),E=n.n(w),z=n(1413),l=n(67294),ue=n(26554),V=n(91146),ce=function(j,N){return l.createElement(V.Z,(0,z.Z)((0,z.Z)({},j),{},{ref:N,icon:ue.Z}))},m=l.forwardRef(ce),D=m,me=n(51042),t=n(85893),Ce=function(j){var N,k=j.cards,G=j.messages,U=j.tabs,H=j.onTabClick,re=j.onAddSubMenu,_=j.onSubMenuClick,p=j.floatingButtons,s=j.onFloatingButtonClick,B=j.title,e=B===void 0?"\u535A\u745E\u5929\u4E0B":B,se=(0,l.useRef)(null),le=(0,l.useRef)(null),K=(0,l.useState)(!1),ve=E()(K,2),X=ve[0],Y=ve[1],Q=(0,l.useState)(0),fe=E()(Q,2),oe=fe[0],Fe=fe[1],he=(0,l.useState)(0),J=E()(he,2),Ee=J[0],W=J[1],I=(0,l.useState)(null),f=E()(I,2),Z=f[0],C=f[1],Me=function(u,O){O.current&&(Y(!0),Fe(u.pageX-O.current.offsetLeft),W(O.current.scrollLeft))},xe=function(){Y(!1)},ye=function(u,O){if(!(!X||!O.current)){u.preventDefault();var q=u.pageX-O.current.offsetLeft,g=(q-oe)*2;O.current.scrollLeft=Ee-g}},Be=function(){Y(!1)},_e=function(u){u.type==="add"?re==null||re():(H==null||H(u),C(Z===u.id?null:u.id))},Ie=function(){if(!Z||!U)return null;var u=U.find(function(O){return O.id===Z});return u==null?void 0:u.subTabs},Oe=function(u){if(!u.mediaUrl)return null;switch(u.mediaType){case"image":return(0,t.jsx)("img",{src:u.mediaUrl,alt:u.title});case"video":return(0,t.jsxs)("video",{controls:!0,children:[(0,t.jsx)("source",{src:u.mediaUrl,type:"video/mp4"}),"Your browser does not support the video tag."]});case"audio":return(0,t.jsxs)("audio",{controls:!0,children:[(0,t.jsx)("source",{src:u.mediaUrl,type:"audio/mpeg"}),"Your browser does not support the audio tag."]});default:return null}};return(0,t.jsx)("div",{className:"phone-preview",children:(0,t.jsxs)("div",{className:"phone-frame",children:[(0,t.jsxs)("div",{className:"header",children:[(0,t.jsx)("div",{className:"back-button",children:(0,t.jsx)(D,{})}),(0,t.jsx)("div",{className:"title",children:e}),(0,t.jsx)("div",{className:"placeholder"})]}),(0,t.jsxs)("div",{className:"content-area",children:[k&&k.length>0&&(0,t.jsx)("div",{className:"cards-section",ref:se,onMouseDown:function(u){return Me(u,se)},onMouseUp:xe,onMouseMove:function(u){return ye(u,se)},onMouseLeave:Be,children:(0,t.jsx)("div",{className:"cards-scroll",children:k.map(function(a){return(0,t.jsxs)("div",{className:"card-item",children:[(0,t.jsx)("div",{className:"card-media",children:Oe(a)}),(0,t.jsxs)("div",{className:"card-content",children:[(0,t.jsx)("div",{className:"card-title text-[14px] mb-[0px]",style:{fontWeight:600},children:a.title}),(0,t.jsx)("div",{className:" text-[14px] text-[#999]",style:{fontWeight:400},children:a.summary}),a.buttons&&a.buttons.length>0&&(0,t.jsx)("div",{className:"card-buttons",children:a.buttons.map(function(u){return(0,t.jsx)("div",{className:"card-button",children:u.name},u.id)})})]})]},a.id)})})}),G&&G.length>0&&(0,t.jsx)("div",{className:"messages-section",children:G.map(function(a){return(0,t.jsxs)("div",{className:"message-item ".concat(a.isUser?"user-message":"system-message"),children:[(0,t.jsx)("div",{className:"message-content",children:a.content}),a.timestamp&&(0,t.jsx)("div",{className:"message-time",children:a.timestamp})]},a.id)})})]}),p&&p.length>0&&(0,t.jsx)("div",{className:"floating-buttons",children:(0,t.jsx)("div",{className:"floating-buttons-scroll",ref:le,onMouseDown:function(u){return Me(u,le)},onMouseUp:xe,onMouseMove:function(u){return ye(u,le)},onMouseLeave:Be,children:p.map(function(a){return(0,t.jsx)("div",{className:"floating-button",onClick:function(){return s==null?void 0:s(a)},children:(0,t.jsx)("span",{className:"button-name",children:a.name})},a.id)})})}),(0,t.jsxs)("div",{className:"bottom-area",children:[U&&U.length>0?(0,t.jsx)("div",{className:"bottom-tabs",children:U.slice(0,3).map(function(a){return(0,t.jsx)("div",{className:"tab-item ".concat(a.type==="add"?"add-tab":""," ").concat(Z===a.id?"active":""),onClick:function(){return _e(a)},children:a.type==="add"?(0,t.jsx)(me.Z,{className:"add-icon"}):(0,t.jsx)("span",{className:"tab-name",children:a.name})},a.id)})}):(0,t.jsx)("div",{className:"message-input",children:(0,t.jsx)("div",{className:"input-placeholder",children:"\u53D1\u9001\u4FE1\u606F..."})}),Z&&Ie()&&(0,t.jsx)("div",{className:"sub-menu",children:(N=Ie())===null||N===void 0?void 0:N.map(function(a){return(0,t.jsx)("div",{className:"sub-menu-item",onClick:function(){return _==null?void 0:_(a)},children:a.name},a.id)})})]})]})})},L=Ce},65124:function(Ze,R,n){n.r(R),n.d(R,{default:function(){return O}});var w=n(15009),E=n.n(w),z=n(97857),l=n.n(z),ue=n(99289),V=n.n(ue),ce=n(5574),m=n.n(ce),D=n(44685),me=n(76772),t=n(47019),Ce=n(45360),L=n(4393),v=n(71230),j=n(15746),N=n(71471),k=n(34041),G=n(86250),U=n(72269),H=n(11941),re=n(96074),_=n(42075),p=n(83622),s=n(67294),B=n(55102),e=n(85893),se=B.Z.TextArea,le=function(g){var b=g.form;return(0,e.jsxs)("div",{children:[(0,e.jsx)("h2",{children:"\u57FA\u7840\u4FE1\u606F"}),(0,e.jsxs)(t.Z,{form:b,layout:"vertical",children:[(0,e.jsx)(t.Z.Item,{name:"name",label:"\u6A21\u677F\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"}],children:(0,e.jsx)(B.Z,{placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u540D\u79F0"})}),(0,e.jsx)(t.Z.Item,{name:"type",label:"\u6A21\u677F\u7C7B\u578B",children:(0,e.jsx)(k.Z,{placeholder:"\u8BF7\u9009\u62E9\u6A21\u677F\u7C7B\u578B",options:[{label:"\u5BCC\u5A92\u4F53",value:"rich"}]})}),(0,e.jsx)(t.Z.Item,{name:"fallbackContent",label:"\u77ED\u4FE1\u56DE\u843D",extra:"\u5185\u5BB9\u65E0\u9700\u5E26\u7B7E\u540D\u548C\u540E\u7F00\uFF0C\u94FE\u63A5\u524D\u540E\u9700\u52A0\u7A7A\u683C",children:(0,e.jsx)(se,{placeholder:"\u8BF7\u8F93\u5165\u77ED\u4FE1\u56DE\u843D\u5185\u5BB9",autoSize:{minRows:4,maxRows:6},showCount:!0,maxLength:500})}),(0,e.jsx)(t.Z.Item,{name:"signature",label:"\u77ED\u4FE1\u7B7E\u540D",extra:"\u9ED8\u8BA4\u4F7F\u7528Chatbot\u76F8\u5173\u8054\u7684\u7B7E\u540D",children:(0,e.jsx)(B.Z,{disabled:!0})}),(0,e.jsx)(t.Z.Item,{name:"suffix",label:"\u77ED\u4FE1\u540E\u7F00",children:(0,e.jsx)(k.Z,{placeholder:"\u8BF7\u9009\u62E9\u77ED\u4FE1\u540E\u7F00",options:[{label:"\u62D2\u6536\u8BF7\u56DE\u590D R",value:"R"}]})})]})]})},K=le,ve=n(19632),X=n.n(ve),Y=n(17198),Q=n(1413),fe=n(27363),oe=n(91146),Fe=function(g,b){return s.createElement(oe.Z,(0,Q.Z)((0,Q.Z)({},g),{},{ref:b,icon:fe.Z}))},he=s.forwardRef(Fe),J=he,Ee=n(47046),W=function(g,b){return s.createElement(oe.Z,(0,Q.Z)((0,Q.Z)({},g),{},{ref:b,icon:Ee.Z}))},I=s.forwardRef(W),f=I,Z=n(51042),C=n(96068),Me=n(85576),xe=n(2487),ye=(0,s.forwardRef)(function(q,g){var b,T=q.onCardsChange,ge=(0,s.useState)([]),$=m()(ge,2),P=$[0],ee=$[1],ne=(0,s.useState)(!1),h=m()(ne,2),M=h[0],y=h[1],ie=(0,s.useState)(null),be=m()(ie,2),o=be[0],te=be[1],Te=t.Z.useForm(),Ae=m()(Te,1),je=Ae[0],Pe=(0,s.useState)("add"),De=m()(Pe,2),Se=De[0],pe=De[1],de=(0,s.useRef)(null);(0,s.useImperativeHandle)(g,function(){return{getCards:function(){return P}}}),(0,s.useEffect)(function(){T==null||T(P)},[P,T]);var ae=function(){pe("add"),te({id:Date.now().toString(),buttons:[],title:"",summary:"",mediaType:"image"}),je.resetFields(),y(!0)},Re=function(r){pe("edit"),te(r),je.setFieldsValue(r),y(!0)},Le=function(r){ee(P.filter(function(d){return d.id!==r}))},Ne=function(){var i=V()(E()().mark(function r(){var d;return E()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,je.validateFields();case 3:d=F.sent,Se==="add"?ee([].concat(X()(P),[l()(l()({},o),d)])):o&&ee(P.map(function(Ue){return Ue.id===o.id?l()(l()({},o),d):Ue})),y(!1),F.next=11;break;case 8:F.prev=8,F.t0=F.catch(0),console.error("Form validation failed:",F.t0);case 11:case"end":return F.stop()}},r,null,[[0,8]])}));return function(){return i.apply(this,arguments)}}(),ke=function(r,d){var c=l()(l()({},r),{},{id:r.id||Date.now().toString()});d==="add"&&o?te(l()(l()({},o),{},{buttons:[].concat(X()(o.buttons),[c])})):d==="edit"&&o&&te(l()(l()({},o),{},{buttons:o.buttons.map(function(F){return F.id===c.id?c:F})}))},S=function(r){var d;(d=de.current)===null||d===void 0||d.show("edit",r)},x=function(r){o&&te(l()(l()({},o),{},{buttons:o.buttons.filter(function(d){return d.id!==r})}))},A=[{title:"\u6807\u9898",dataIndex:"title",key:"title"},{title:"\u7D20\u6750\u7C7B\u578B",dataIndex:"mediaUrl",key:"mediaUrl"},{title:"\u6458\u8981",dataIndex:"summary",key:"summary"},{width:150,title:"\u64CD\u4F5C",key:"action",render:function(r,d){return(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(p.ZP,{type:"link",icon:(0,e.jsx)(J,{}),onClick:function(){return Re(d)},children:"\u7F16\u8F91"}),(0,e.jsx)(p.ZP,{type:"link",danger:!0,icon:(0,e.jsx)(f,{}),onClick:function(){return Le(d.id)},children:"\u5220\u9664"})]})}}];return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:16},children:(0,e.jsxs)("h2",{children:["\u5361\u7247\u5217\u8868",(0,e.jsx)(p.ZP,{style:{marginLeft:16},type:"primary",icon:(0,e.jsx)(Z.Z,{}),onClick:ae,children:"\u65B0\u5EFA\u5361\u7247"})]})}),(0,e.jsx)(C.Z,{columns:A,dataSource:P,rowKey:"id",pagination:!1}),(0,e.jsx)(Me.Z,{title:o?"\u7F16\u8F91\u5361\u7247":"\u65B0\u5EFA\u5361\u7247",open:M,onOk:Ne,onCancel:function(){return y(!1)},width:600,children:(0,e.jsxs)(t.Z,{form:je,layout:"vertical",children:[(0,e.jsx)(t.Z.Item,{name:"title",label:"\u6807\u9898",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}],children:(0,e.jsx)(B.Z,{placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"})}),(0,e.jsx)(t.Z.Item,{name:"mediaUrl",label:"\u7D20\u6750\u7C7B\u578B",rules:[{message:"\u8BF7\u9009\u62E9\u7D20\u6750\u7C7B\u578B"}],children:(0,e.jsx)(k.Z,{placeholder:"\u8BF7\u9009\u62E9\u7D20\u6750\u7C7B\u578B",options:[{value:"https://cdn-static.isjike.com/open-data-console/logo_light.png",label:"xx\u56FE\u7247"},{value:"video",label:"xx\u89C6\u9891"},{value:"audio",label:"xx\u97F3\u9891"}]})}),(0,e.jsx)(t.Z.Item,{name:"summary",style:{marginBottom:16},label:"\u6458\u8981",rules:[{max:1e3,message:"\u6458\u8981\u4E0D\u80FD\u8D85\u8FC71000\u5B57"}],children:(0,e.jsx)(B.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u6458\u8981\uFF0C\u5982\u9700\u8981\u63D2\u5165\u53D8\u91CF\u4FA7\u7528{}\u5360\u4F4D",maxLength:1e3,showCount:!0,rows:4})}),(0,e.jsxs)(t.Z.Item,{label:"\u5E95\u90E8\u6309\u94AE",children:[((b=o==null?void 0:o.buttons)!==null&&b!==void 0?b:[]).length>0?(0,e.jsx)(xe.Z,{size:"small",dataSource:(o==null?void 0:o.buttons)||[],renderItem:function(r){return(0,e.jsx)(xe.Z.Item,{actions:[(0,e.jsx)(p.ZP,{type:"link",icon:(0,e.jsx)(J,{}),onClick:function(){return S(r)},children:"\u7F16\u8F91"},"edit"),(0,e.jsx)(p.ZP,{type:"link",danger:!0,icon:(0,e.jsx)(f,{}),onClick:function(){return x(r.id)},children:"\u5220\u9664"},"delete")],children:(0,e.jsx)(xe.Z.Item.Meta,{title:r.name,description:(0,e.jsxs)("div",{children:["\u7C7B\u578B\uFF1A$",r.type==="page"?"\u8DF3\u8F6C\u9875\u9762":r.type==="phone"?"\u62E8\u6253\u7535\u8BDD":"\u5B9A\u5411\u53D1\u9001",(0,e.jsxs)("div",{children:["\u5185\u5BB9\uFF1A",r.content||r.phoneNumber]})]})})})}}):"",(0,e.jsx)(p.ZP,{type:"primary",icon:(0,e.jsx)(Z.Z,{}),onClick:function(){var r;(r=de.current)===null||r===void 0||r.show("add")},style:{marginTop:16},children:"\u6DFB\u52A0\u6309\u94AE"})]})]})}),(0,e.jsx)(Y.Z,{ref:de,onOk:ke})]})}),Be=ye,_e={page:"\u8DF3\u8F6C\u9875\u9762",phone:"\u62E8\u6253\u7535\u8BDD",message:"\u5B9A\u5411\u53D1\u9001",send:"\u5B9A\u5411\u53D1\u9001"},Ie=function(g){var b=g.menuItems,T=g.setMenuItems,ge=g.onDeleteMenuItem,$=(0,s.useRef)(null),P=function(h,M){T(M==="add"?[].concat(X()(b),[h]):b.map(function(y){return y.id===h.id?h:y}))},ee=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u83DC\u5355\u7C7B\u578B",dataIndex:"type",key:"type",render:function(h){return h&&_e[h]}},{title:"\u5185\u5BB9",dataIndex:"content",key:"content",render:function(h,M){return M.type==="page"?M.content:M.type==="phone"?M.phoneNumber:M.content}},{title:"\u64CD\u4F5C",key:"action",width:150,render:function(h,M){return(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(p.ZP,{type:"link",icon:(0,e.jsx)(J,{}),onClick:function(){var ie;return(ie=$.current)===null||ie===void 0?void 0:ie.show("edit",M)},children:"\u7F16\u8F91"}),(0,e.jsx)(p.ZP,{type:"link",danger:!0,icon:(0,e.jsx)(f,{}),onClick:function(){return ge(M.id)},children:"\u5220\u9664"})]})}}];return(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{style:{marginBottom:16},children:(0,e.jsxs)("h2",{children:["\u5E95\u90E8\u60AC\u6D6E\u83DC\u5355",(0,e.jsx)(p.ZP,{style:{marginLeft:16},type:"primary",icon:(0,e.jsx)(Z.Z,{}),onClick:function(){var h;return(h=$.current)===null||h===void 0?void 0:h.show("add")},children:"\u6DFB\u52A0\u83DC\u5355\u9879"})]})}),(0,e.jsx)(C.Z,{columns:ee,dataSource:b,rowKey:"id",pagination:!1}),(0,e.jsx)(Y.Z,{ref:$,onOk:P})]})},Oe=Ie,a={menuItem:"menuItem___eftgf",cardItem:"cardItem___sxT9x",buttonList:"buttonList___kxnTt",buttonItem:"buttonItem___GhA4l",uploadArea:"uploadArea___PlLcg",tabsContainer:"tabsContainer___lFoqo",contentContainer:"contentContainer___FkPAz",section:"section___GzQng","ant-form":"ant-form___fPtpP","ant-card":"ant-card___ydRC9","ant-card-body":"ant-card-body___DeSeF"},u=function(){var g=t.Z.useForm(),b=m()(g,1),T=b[0],ge=(0,s.useState)(!1),$=m()(ge,2),P=$[0],ee=$[1],ne=(0,s.useState)("basic"),h=m()(ne,2),M=h[0],y=h[1],ie=(0,s.useState)([]),be=m()(ie,2),o=be[0],te=be[1],Te=(0,s.useState)([]),Ae=m()(Te,2),je=Ae[0],Pe=Ae[1],De=(0,s.useRef)(null),Se=(0,s.useRef)(null),pe=(0,s.useRef)(null),de=(0,s.useRef)(null),ae=(0,s.useRef)(null);(0,s.useEffect)(function(){var S=function(){var i,r;if(ae.current){var d=ae.current.scrollTop,c=((i=pe.current)===null||i===void 0?void 0:i.offsetTop)||0,F=((r=de.current)===null||r===void 0?void 0:r.offsetTop)||0;d>=F-100?y("menu"):d>=c-100?y("cards"):y("basic")}},x=ae.current;return x&&x.addEventListener("scroll",S),function(){x&&x.removeEventListener("scroll",S)}},[]);var Re=function(x){y(x);var A={basic:Se,cards:pe,menu:de},i=A[x];i.current&&ae.current&&ae.current.scrollTo({top:i.current.offsetTop-20,behavior:"smooth"})},Le=function(x){te(o.filter(function(A){return A.id!==x}))},Ne=function(){var S=V()(E()().mark(function x(){var A,i,r;return E()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,T.validateFields();case 3:i=c.sent,r=((A=De.current)===null||A===void 0?void 0:A.getCards())||[],ee(!0),console.log("\u63D0\u4EA4\u7684\u8868\u5355\u6570\u636E:",l()(l()({},i),{},{cards:r})),Ce.ZP.success("\u6A21\u677F\u521B\u5EFA\u6210\u529F"),me.history.back(),c.next=14;break;case 11:c.prev=11,c.t0=c.catch(0),console.error("\u8868\u5355\u9A8C\u8BC1\u5931\u8D25:",c.t0);case 14:return c.prev=14,ee(!1),c.finish(14);case 17:case"end":return c.stop()}},x,null,[[0,11,14,17]])}));return function(){return S.apply(this,arguments)}}(),ke=function(){me.history.back()};return(0,e.jsxs)(L.Z,{children:[(0,e.jsx)(v.Z,{children:(0,e.jsx)(j.Z,{span:24,children:(0,e.jsxs)(t.Z,{form:T,layout:"horizontal",children:[(0,e.jsx)(t.Z.Item,{label:"\u9009\u62E9\u7528\u6237",name:"templateName",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7528\u6237"}],extra:(0,e.jsx)(N.Z.Text,{type:"secondary",children:"\u4E3A\u6307\u5B9A\u7528\u6237\u8D26\u6237\uFF0C\u521B\u5EFA\u6A21\u7248"}),children:(0,e.jsx)(k.Z,{placeholder:"\u6307\u5B9A\u7528\u6237\u8D26\u53F7",style:{maxWidth:400}})}),(0,e.jsxs)(G.Z,{wrap:!0,children:[(0,e.jsx)(t.Z.Item,{label:"\u9700\u7528\u6237\u6388\u6743",name:"authorization",children:(0,e.jsx)(U.Z,{})}),(0,e.jsx)(t.Z.Item,{dependencies:["authorization","time"],noStyle:!0,children:function(x){var A=x.getFieldValue,i=A("authorization"),r=A("time");return i?(0,e.jsx)(t.Z.Item,{label:"\u5012\u8BA1\u65F6",name:"time",labelCol:{span:4},style:{flex:1},extra:r&&(0,e.jsx)(N.Z.Text,{type:"secondary",style:{whiteSpace:"nowrap"},children:"24\u5C0F\u65F6\u540E\uFF0C\u81EA\u52A8\u6388\u6743"}),children:(0,e.jsx)(U.Z,{})}):null}})]})]})})}),(0,e.jsxs)(v.Z,{gutter:24,children:[(0,e.jsx)(j.Z,{span:7,children:(0,e.jsx)(D.Z,{cards:je,tabs:[],onTabClick:function(){},floatingButtons:o,onFloatingButtonClick:function(x){console.log("Floating button clicked:",x)}})}),(0,e.jsxs)(j.Z,{span:16,children:[(0,e.jsxs)("div",{className:a.tabsContainer,children:[(0,e.jsx)(H.Z,{activeKey:M,onChange:Re,tabPosition:"right",items:[{key:"basic",label:"\u57FA\u7840\u4FE1\u606F",children:null},{key:"cards",label:"\u5361\u7247\u4FE1\u606F",children:null},{key:"menu",label:"\u60AC\u6D6E\u83DC\u5355",children:null}]}),(0,e.jsxs)("div",{ref:ae,className:a.contentContainer,children:[(0,e.jsx)("div",{ref:Se,className:a.section,children:(0,e.jsx)(K,{form:T})}),(0,e.jsx)("div",{ref:pe,className:a.section,children:(0,e.jsx)(Be,{ref:De,onCardsChange:Pe})}),(0,e.jsx)("div",{ref:de,className:a.section,children:(0,e.jsx)(Oe,{menuItems:o,setMenuItems:te,onDeleteMenuItem:Le})}),(0,e.jsx)(re.Z,{})]})]}),(0,e.jsx)(G.Z,{justify:"end",style:{marginTop:12},children:(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(p.ZP,{onClick:ke,children:"\u53D6\u6D88"}),(0,e.jsx)(p.ZP,{type:"primary",onClick:Ne,loading:P,children:"\u63D0\u4EA4\u521B\u5EFA"})]})})]})]})]})},O=u}}]);
