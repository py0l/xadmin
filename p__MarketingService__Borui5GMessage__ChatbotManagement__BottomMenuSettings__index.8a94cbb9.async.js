"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[750],{51042:function(te,C,n){var P=n(1413),x=n(67294),y=n(42110),i=n(91146),g=function(p,b){return x.createElement(i.Z,(0,P.Z)((0,P.Z)({},p),{},{ref:b,icon:y.Z}))},d=x.forwardRef(g);C.Z=d},17198:function(te,C,n){var P=n(15009),x=n.n(P),y=n(97857),i=n.n(y),g=n(99289),d=n.n(g),A=n(5574),p=n.n(A),b=n(47019),X=n(85576),a=n(55102),q=n(34041),M=n(67294),v=n(85893),c=(0,M.forwardRef)(function(Z,S){var F=Z.onOk,u=(0,M.useState)(!1),U=p()(u,2),Y=U[0],N=U[1],H=(0,M.useState)(null),O=p()(H,2),K=O[0],w=O[1],k=b.Z.useForm(),J=p()(k,1),B=J[0],ee=(0,M.useState)("add"),ne=p()(ee,2),Q=ne[0],D=ne[1],I=(0,M.useState)(!0),T=p()(I,2),$=T[0],z=T[1];(0,M.useImperativeHandle)(S,function(){return{show:function(m,r){z(!0),D(m),m==="edit"&&r?(w(r),B.setFieldsValue(r),console.log("show editingItem",r),r.subTabs&&r.subTabs.length>0&&z(!1)):(w(null),B.resetFields()),N(!0)}}});var V=function(){var j=d()(x()().mark(function m(){var r;return x()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,B.validateFields();case 3:r=o.sent,F(i()(i()({},r),{},{id:(K==null?void 0:K.id)||Date.now().toString()}),Q),N(!1),w(null),B.resetFields(),o.next=13;break;case 10:o.prev=10,o.t0=o.catch(0),console.error("Form validation failed:",o.t0);case 13:case"end":return o.stop()}},m,null,[[0,10]])}));return function(){return j.apply(this,arguments)}}(),W=function(){N(!1),w(null),B.resetFields()};return(0,v.jsx)(X.Z,{title:K?"\u7F16\u8F91\u6309\u94AE":"\u6DFB\u52A0\u6309\u94AE",open:Y,onOk:V,onCancel:W,width:600,children:(0,v.jsxs)(b.Z,{form:B,layout:"vertical",children:[(0,v.jsx)(b.Z.Item,{name:"name",label:"\u6309\u94AE\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6309\u94AE\u540D\u79F0"}],children:(0,v.jsx)(a.Z,{placeholder:"\u8BF7\u8F93\u5165\u6309\u94AE\u540D\u79F0"})}),$&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(b.Z.Item,{name:"type",label:"\u6309\u94AE\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B"}],children:(0,v.jsx)(q.Z,{placeholder:"\u8BF7\u9009\u62E9\u6309\u94AE\u7C7B\u578B",options:[{value:"page",label:"\u8DF3\u8F6C\u9875\u9762"},{value:"phone",label:"\u62E8\u6253\u7535\u8BDD"},{value:"send",label:"\u5B9A\u5411\u53D1\u9001"}]})}),(0,v.jsx)(b.Z.Item,{noStyle:!0,shouldUpdate:function(m,r){return m.type!==r.type},children:function(m){var r=m.getFieldValue,l=r("type");return l==="page"?(0,v.jsx)(b.Z.Item,{name:"url",label:"\u8DF3\u8F6C\u94FE\u63A5",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u94FE\u63A5"}],children:(0,v.jsx)(a.Z,{placeholder:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u94FE\u63A5"})}):l==="phone"?(0,v.jsx)(b.Z.Item,{name:"phone",label:"\u7535\u8BDD\u53F7\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"}],children:(0,v.jsx)(a.Z,{placeholder:"\u8BF7\u8F93\u5165\u7535\u8BDD\u53F7\u7801"})}):l==="send"?(0,v.jsx)(b.Z.Item,{name:"content",label:"\u53D1\u9001\u5185\u5BB9",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u53D1\u9001\u5185\u5BB9"}],children:(0,v.jsx)(a.Z.TextArea,{placeholder:"\u8BF7\u8F93\u5165\u53D1\u9001\u5185\u5BB9",rows:4})}):null}})]})]})})});C.Z=c},44685:function(te,C,n){n.d(C,{Z:function(){return M}});var P=n(5574),x=n.n(P),y=n(1413),i=n(67294),g=n(26554),d=n(91146),A=function(c,Z){return i.createElement(d.Z,(0,y.Z)((0,y.Z)({},c),{},{ref:Z,icon:g.Z}))},p=i.forwardRef(A),b=p,X=n(51042),a=n(85893),q=function(c){var Z,S=c.cards,F=c.messages,u=c.tabs,U=c.onTabClick,Y=c.onAddSubMenu,N=c.onSubMenuClick,H=c.floatingButtons,O=c.onFloatingButtonClick,K=c.title,w=K===void 0?"\u535A\u745E\u5929\u4E0B":K,k=(0,i.useRef)(null),J=(0,i.useRef)(null),B=(0,i.useState)(!1),ee=x()(B,2),ne=ee[0],Q=ee[1],D=(0,i.useState)(0),I=x()(D,2),T=I[0],$=I[1],z=(0,i.useState)(0),V=x()(z,2),W=V[0],j=V[1],m=(0,i.useState)(null),r=x()(m,2),l=r[0],o=r[1],f=function(e,s){s.current&&(Q(!0),$(e.pageX-s.current.offsetLeft),j(s.current.scrollLeft))},h=function(){Q(!1)},G=function(e,s){if(!(!ne||!s.current)){e.preventDefault();var _=e.pageX-s.current.offsetLeft,R=(_-T)*2;s.current.scrollLeft=W-R}},ae=function(){Q(!1)},se=function(e){e.type==="add"?Y==null||Y():(U==null||U(e),o(l===e.id?null:e.id))},ue=function(){if(!l||!u)return null;var e=u.find(function(s){return s.id===l});return e==null?void 0:e.subTabs},re=function(e){if(!e.mediaUrl)return null;switch(e.mediaType){case"image":return(0,a.jsx)("img",{src:e.mediaUrl,alt:e.title});case"video":return(0,a.jsxs)("video",{controls:!0,children:[(0,a.jsx)("source",{src:e.mediaUrl,type:"video/mp4"}),"Your browser does not support the video tag."]});case"audio":return(0,a.jsxs)("audio",{controls:!0,children:[(0,a.jsx)("source",{src:e.mediaUrl,type:"audio/mpeg"}),"Your browser does not support the audio tag."]});default:return null}};return(0,a.jsx)("div",{className:"phone-preview",children:(0,a.jsxs)("div",{className:"phone-frame",children:[(0,a.jsxs)("div",{className:"header",children:[(0,a.jsx)("div",{className:"back-button",children:(0,a.jsx)(b,{})}),(0,a.jsx)("div",{className:"title",children:w}),(0,a.jsx)("div",{className:"placeholder"})]}),(0,a.jsxs)("div",{className:"content-area",children:[S&&S.length>0&&(0,a.jsx)("div",{className:"cards-section",ref:k,onMouseDown:function(e){return f(e,k)},onMouseUp:h,onMouseMove:function(e){return G(e,k)},onMouseLeave:ae,children:(0,a.jsx)("div",{className:"cards-scroll",children:S.map(function(t){return(0,a.jsxs)("div",{className:"card-item",children:[(0,a.jsx)("div",{className:"card-media",children:re(t)}),(0,a.jsxs)("div",{className:"card-content",children:[(0,a.jsx)("div",{className:"card-title text-[14px] mb-[0px]",style:{fontWeight:600},children:t.title}),(0,a.jsx)("div",{className:" text-[14px] text-[#999]",style:{fontWeight:400},children:t.summary}),t.buttons&&t.buttons.length>0&&(0,a.jsx)("div",{className:"card-buttons",children:t.buttons.map(function(e){return(0,a.jsx)("div",{className:"card-button",children:e.name},e.id)})})]})]},t.id)})})}),F&&F.length>0&&(0,a.jsx)("div",{className:"messages-section",children:F.map(function(t){return(0,a.jsxs)("div",{className:"message-item ".concat(t.isUser?"user-message":"system-message"),children:[(0,a.jsx)("div",{className:"message-content",children:t.content}),t.timestamp&&(0,a.jsx)("div",{className:"message-time",children:t.timestamp})]},t.id)})})]}),H&&H.length>0&&(0,a.jsx)("div",{className:"floating-buttons",children:(0,a.jsx)("div",{className:"floating-buttons-scroll",ref:J,onMouseDown:function(e){return f(e,J)},onMouseUp:h,onMouseMove:function(e){return G(e,J)},onMouseLeave:ae,children:H.map(function(t){return(0,a.jsx)("div",{className:"floating-button",onClick:function(){return O==null?void 0:O(t)},children:(0,a.jsx)("span",{className:"button-name",children:t.name})},t.id)})})}),(0,a.jsxs)("div",{className:"bottom-area",children:[u&&u.length>0?(0,a.jsx)("div",{className:"bottom-tabs",children:u.slice(0,3).map(function(t){return(0,a.jsx)("div",{className:"tab-item ".concat(t.type==="add"?"add-tab":""," ").concat(l===t.id?"active":""),onClick:function(){return se(t)},children:t.type==="add"?(0,a.jsx)(X.Z,{className:"add-icon"}):(0,a.jsx)("span",{className:"tab-name",children:t.name})},t.id)})}):(0,a.jsx)("div",{className:"message-input",children:(0,a.jsx)("div",{className:"input-placeholder",children:"\u53D1\u9001\u4FE1\u606F..."})}),l&&ue()&&(0,a.jsx)("div",{className:"sub-menu",children:(Z=ue())===null||Z===void 0?void 0:Z.map(function(t){return(0,a.jsx)("div",{className:"sub-menu-item",onClick:function(){return N==null?void 0:N(t)},children:t.name},t.id)})})]})]})})},M=q},77288:function(te,C,n){n.r(C),n.d(C,{default:function(){return ne}});var P=n(19632),x=n.n(P),y=n(97857),i=n.n(y),g=n(15009),d=n.n(g),A=n(99289),p=n.n(A),b=n(5574),X=n.n(b),a=n(44685),q=n(85576),M=n(45360),v=n(42075),c=n(83622),Z=n(96068),S=n(47019),F=n(67294),u=n(85893),U={page:"\u8DF3\u8F6C\u9875\u9762",phone:"\u62E8\u6253\u7535\u8BDD",send:"\u5B9A\u5411\u53D1\u9001",message:"\u53D1\u9001\u6D88\u606F"},Y=function(D){var I=D.menuItems,T=D.setMenuItems,$=D.handleEditMenu,z=D.handleAddMenu,V=D.handleAddSubMenu,W=function(r,l){q.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:'\u786E\u5B9A\u8981\u5220\u9664\u83DC\u5355"'.concat(r.name,'"\u5417\uFF1F'),onOk:function(){T(l?I.map(function(f){var h;return f.id===l?i()(i()({},f),{},{subTabs:(h=f.subTabs)===null||h===void 0?void 0:h.filter(function(G){return G.id!==r.id})}):f}):I.filter(function(f){return f.id!==r.id})),M.ZP.success("\u5220\u9664\u6210\u529F")}})},j=function(r){var l=[{title:"\u5B50\u83DC\u5355\u540D\u79F0",dataIndex:"name",width:120},{title:"\u7C7B\u578B",dataIndex:"type",width:120,render:function(f){return f?U[f]:"\u5B50\u83DC\u5355\u7EC4"}},{title:"\u5185\u5BB9",dataIndex:"content",render:function(f,h){return h.type==="page"?h.url:h.content||h.phoneNumber}},{title:"\u64CD\u4F5C",width:120,render:function(f,h){return(0,u.jsxs)(v.Z,{children:[(0,u.jsx)(c.ZP,{type:"link",size:"small",onClick:function(){return $(h)},children:"\u7F16\u8F91"}),(0,u.jsx)(c.ZP,{type:"link",size:"small",danger:!0,onClick:function(){return W(h,r.id)},children:"\u5220\u9664"})]})}}];return(0,u.jsx)(Z.Z,{columns:l,dataSource:r.subTabs||[],rowKey:"id",pagination:!1,size:"small"})};return(0,u.jsxs)(S.Z.Item,{label:"\u5E95\u90E8\u83DC\u5355",children:[(0,u.jsx)(Z.Z,{columns:[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",width:120},{title:"\u7C7B\u578B",dataIndex:"type",width:120,render:function(r){return r?U[r]:"\u5B50\u83DC\u5355\u7EC4"}},{title:"\u5185\u5BB9",dataIndex:"content",render:function(r,l){return console.log("record",l),l.subTabs&&l.subTabs.length>0?"\u5B50\u83DC\u5355\u5217\u8868":l.content||l.phoneNumber||l.url}},{title:"\u64CD\u4F5C",width:180,render:function(r,l){return(0,u.jsxs)(v.Z,{children:[(0,u.jsx)(c.ZP,{type:"link",size:"small",onClick:function(){return $(l)},children:"\u7F16\u8F91"}),(0,u.jsx)(c.ZP,{type:"link",size:"small",onClick:function(){V({id:"",name:"",type:"page",content:"",isSubMenu:!0,parentId:l.id},l)},children:"\u6DFB\u52A0\u5B50\u83DC\u5355"}),(0,u.jsx)(c.ZP,{type:"link",size:"small",danger:!0,onClick:function(){return W(l)},children:"\u5220\u9664"})]})}}],dataSource:I,rowKey:"id",pagination:!1,expandable:{expandedRowRender:j,defaultExpandAllRows:!0}}),(0,u.jsx)(c.ZP,{style:{marginBottom:16,marginTop:16},onClick:z,children:"+ \u6DFB\u52A0\u83DC\u5355\u9879"})]})},N=Y,H=n(17198),O=n(76772),K=n(4393),w=n(71230),k=n(15746),J=n(34041),B=n(55102),ee=function(){var D=S.Z.useForm(),I=X()(D,1),T=I[0],$=(0,O.useParams)(),z=$.id,V=(0,F.useState)([]),W=X()(V,2),j=W[0],m=W[1],r=(0,F.useState)(null),l=X()(r,2),o=l[0],f=l[1],h=(0,F.useRef)(null);(0,F.useEffect)(function(){var t=function(){var e=p()(d()().mark(function s(){var _;return d()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:try{_={name:"\u4F01\u4E1A\u5BA2\u670D\u673A\u5668\u4EBA",menuItems:[{id:"1",name:"\u9996\u9875",type:"page",content:"https://example.com",subTabs:[{id:"1-1",name:"\u5B50\u83DC\u53551",type:"page",content:"https://example.com/sub1"},{id:"1-2",name:"\u5B50\u83DC\u53552",type:"page",content:"https://example.com/sub2"}]},{id:"2",name:"\u8054\u7CFB\u6211\u4EEC",type:"phone",content:"10086"}]},T.setFieldsValue({name:_.name}),m(_.menuItems)}catch(E){M.ZP.error("\u83B7\u53D6\u83DC\u5355\u914D\u7F6E\u5931\u8D25")}case 1:case"end":return L.stop()}},s)}));return function(){return e.apply(this,arguments)}}();t()},[z,T]);var G=function(){var t=p()(d()().mark(function e(s){return d()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:try{console.log("\u63D0\u4EA4\u7684\u503C:",s),M.ZP.success("\u4FDD\u5B58\u6210\u529F"),O.history.back()}catch(L){M.ZP.error("\u4FDD\u5B58\u5931\u8D25")}case 1:case"end":return R.stop()}},e)}));return function(s){return t.apply(this,arguments)}}(),ae=function(){var e;f(null),(e=h.current)===null||e===void 0||e.show("add")},se=function(e,s){var _;if(console.log("handleAddSubMenu record",s),s.subTabs&&s.subTabs.length>=3){M.ZP.error("\u6700\u591A\u53EA\u80FD\u6DFB\u52A03\u4E2A\u5B50\u83DC\u5355");return}if(!s.subTabs||s.subTabs.length===0){q.Z.confirm({title:"\u63D0\u793A",content:"\u6DFB\u52A0\u5B50\u83DC\u5355\u540E\uFF0C\u4E00\u7EA7\u83DC\u5355\u7684\u5185\u5BB9\u5C06\u88AB\u6E05\u9664\u3002\u786E\u5B9A\u6DFB\u52A0\u5B50\u83DC\u5355\uFF1F",onOk:function(){var L;f(e),(L=h.current)===null||L===void 0||L.show("add")}});return}f(e),(_=h.current)===null||_===void 0||_.show("add")},ue=function(e){var s;f(e),(s=h.current)===null||s===void 0||s.show("edit",e)},re=function(e,s){if(s==="add")if(o!=null&&o.isSubMenu){var _=j.map(function(E){return E.id===(o==null?void 0:o.parentId)?i()(i()({},E),{},{subTabs:[].concat(x()(E.subTabs||[]),[e])}):E});console.log("\u4E8C\u7EA7\u6DFB\u52A0 list",_),m(_)}else{var R=j.concat(e);console.log("\u4E00\u7EA7\u6DFB\u52A0 list",R),m(R)}else{var L=j.map(function(E){return E.id===(o==null?void 0:o.id)?i()(i()({},E),e):E.subTabs&&E.subTabs.length>0?i()(i()({},E),{},{subTabs:E.subTabs.map(function(le){return le.id===(e==null?void 0:e.id)?i()({},e):le})}):E});m(L)}M.ZP.success(s==="add"?"\u6DFB\u52A0\u6210\u529F":"\u4FEE\u6539\u6210\u529F")};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(K.Z,{children:(0,u.jsxs)(w.Z,{gutter:24,children:[(0,u.jsx)(k.Z,{span:6,children:(0,u.jsx)(a.Z,{tabs:j.map(function(t){var e;return{id:t.id,name:t.name,icon:"\u{1F3E0}",type:t.type,subTabs:(e=t.subTabs)===null||e===void 0?void 0:e.map(function(s){return{id:s.id,name:s.name,type:s.type}})}}),onTabClick:function(e){return console.log("Tab clicked:",e)}})}),(0,u.jsx)(k.Z,{span:15,children:(0,u.jsxs)(S.Z,{form:T,layout:"vertical",style:{marginTop:16},onFinish:G,children:[(0,u.jsx)(S.Z.Item,{label:"\u9009\u62E9\u7528\u6237",name:"name",required:!0,children:(0,u.jsx)(J.Z,{disabled:!0,placeholder:"\u8BF7\u9009\u62E9\u7528\u6237"})}),(0,u.jsx)(S.Z.Item,{label:"Chatbot\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Chatbot\u540D\u79F0"}],children:(0,u.jsx)(B.Z,{})}),(0,u.jsx)(N,{menuItems:j,setMenuItems:m,handleEditMenu:ue,handleAddMenu:ae,handleAddSubMenu:se}),(0,u.jsxs)(S.Z.Item,{children:[(0,u.jsx)(c.ZP,{style:{marginRight:8},onClick:function(){return O.history.back()},children:"\u8FD4\u56DE"}),(0,u.jsx)(c.ZP,{type:"primary",htmlType:"submit",children:"\u4FDD\u5B58"})]})]})})]})}),(0,u.jsx)(H.Z,{ref:h,onOk:re})]})},ne=ee},79370:function(te,C,n){n.d(C,{G:function(){return i}});var P=n(98924),x=function(d){if((0,P.Z)()&&window.document.documentElement){var A=Array.isArray(d)?d:[d],p=window.document.documentElement;return A.some(function(b){return b in p.style})}return!1},y=function(d,A){if(!x(d))return!1;var p=document.createElement("div"),b=p.style[d];return p.style[d]=A,p.style[d]!==b};function i(g,d){return!Array.isArray(g)&&d!==void 0?y(g,d):x(g)}}}]);
